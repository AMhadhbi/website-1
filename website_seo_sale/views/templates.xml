<?xml version="1.0" encoding="utf-8"?>

<openerp>
    <data>

        <template id="product" name="Product" inherit_id="website_sale.product">
                <xpath expr="//ol[@class='breadcrumb']" position="replace">
                    <ol class="breadcrumb">
                        <li><a t-att-href="keep('/shop', category=0)">Products</a></li>
                        <li t-if="category"><a t-att-href="keep('/category/%s' % slaag(category), category=0)" t-field="category.name"/></li>
                        <li class="active"><span t-field="product.name"/></li>
                    </ol>
                </xpath>
        </template>

        <template id="products_item" name="Products item" inherit_id="website_sale.products_item">
            <xpath expr="//div[@class='oe_product_image']" position="replace">
              <div class="oe_product_image">
                  <a itemprop="url" t-att-href="keep('/%s' % slaag(product), page=(pager['page']['num'] if pager['page']['num']>1 else None))">
                      <span itemprop="image" t-field="product.image" t-field-options='{"widget": "image" #{None if product_image_big else ", \"resize\": \"300x300\""}}' t-att-alt="product.name"/>
                  </a>
              </div>
            </xpath>

            <xpath expr="//a[@itemprop='name']" position="replace">
                <a itemprop="name" t-att-href="keep('/%s' % slaag(product), page=(pager['page']['num'] if pager['page']['num']>1 else None))" t-field="product.name"/>
            </xpath>
        </template>

        <template id="products_add_to_cart" inherit_id="website_sale.products_add_to_cart" active="False" customize_show="True" name="Add to Cart">
            <xpath expr="//a[@class='btn btn-default btn-xs']" position="replace">
                <a class="btn btn-default btn-xs" t-att-href="keep('/%s' % slaag(product), page=(pager['page']['num'] if pager['page']['num']>1 else None))"><span class="fa fa-shopping-cart"/></a>
            </xpath>
        </template>

        <template id="recommended_products" inherit_id="website_sale.recommended_products" customize_show="True" name="Suggested Products">
            <xpath expr="//a[@t-attf-href='/shop/product/#{ slug(product) }']" position="after">
                <a t-attf-href="/#{ slaag(product) }" style="display: block">
                  <span t-att-title='product.name' t-field='product.name' style="display: block;"/>
                </a>
            </xpath>
        </template>

        <!--
        <template id="cart" name="Shopping Cart" inherit_id="website_sale.cart">
            <xpath expr="//a[@t-attf-href='/shop/product/#{ slug(line.product_id.product_tmpl_id) }']" position="replace">
                <a t-attf-href="/#{ slaag(line.product_id.product_tmpl_id) }">
                  <strong t-esc="line.product_id.with_context(display_default_code=False).display_name"/>
                </a>
            </xpath>
        </template>
        -->

        <template id="payment" inherit_id="website_sale.payment">
            <xpath expr="//a[@t-attf-href='/shop/product/#{ slug(line.product_id.product_tmpl_id) }']" position="replace">
                <a t-attf-href="/#{ slaag(line.product_id.product_tmpl_id) }">
                  <span t-field="line.product_id.image_small"
                        t-field-options='{"widget": "image", "class": "img-rounded"}'/>
                </a>
            </xpath>
        </template>

        <template id="cart_popover" name="Cart Popover" inherit_id="website_sale.cart_popover">
            <xpath expr="//a[@t-attf-href='/shop/product/#{ slug(line.product_id.product_tmpl_id) }']" position="replace">
                <a t-attf-href="/#{ slaag(line.product_id.product_tmpl_id) }">
                    <span t-esc="line.product_id.with_context(display_default_code=False).display_name" class="h6"/>
                </a>
            </xpath>
        </template>

        <template id="suggested_products_list" inherit_id="website_sale.suggested_products_list" customize_show="True" name="Suggested Products in my cart">
            <xpath expr="//tbody/tr/td[1]/a[@t-attf-href='/shop/product/#{ slug(product.product_tmpl_id) }']" position="after">
                <a t-attf-href="/shop/#{ slaag(product.product_tmpl_id) }">
                  <span t-field="product.image_small"
                        t-field-options='{"widget": "image", "class": "img-rounded"}'/>
                </a>
            </xpath>

            <xpath expr="//tbody/tr/td[2]/div/a[@t-attf-href='/shop/product/#{ slug(product.product_tmpl_id) }']" position="replace">
                <a t-attf-href="/#{ slaag(product.product_tmpl_id) }">
                  <strong t-field="product.display_name"/>
                </a>
            </xpath>
        </template>

        <template id="confirmation" inherit_id="website_sale.confirmation">
            <xpath expr="//a[@t-attf-href='/shop/product/#{ slug(line.product_id.product_tmpl_id) }']" position="replace">
                <a t-attf-href="/#{ slaag(line.product_id.product_tmpl_id) }">
                    <strong t-esc="line.product_id.with_context(display_default_code=False).display_name"/>
                </a>
            </xpath>
        </template>

        <template id="categories_recursive" name="Category list" inherit_id="website_sale.categories_recursive">
            <xpath expr="//li" position="replace">
                <li t-att-class="'active' if c.id == int(category or 0) else ''">
                  <a t-att-href="keep('/category/%s' % slaag(c), category=0)" t-field="c.name"></a>
                  <ul t-if="c.child_id" class="nav nav-pills nav-stacked nav-hierarchy">
                      <t t-foreach="c.child_id" t-as="c">
                          <t t-call="website_seo_sale.categories_recursive"/>
                      </t>
                  </ul>
                </li>
            </xpath>
        </template>

        <template id="option_collapse_categories_recursive" name="Collapse Category Recursive" inherit_id="website_sale.option_collapse_categories_recursive">
            <xpath expr="//li" position="replace">
                <li t-att-class="'active' if categ.id == int(category or 0) else ''">
                  <i t-if="categ.child_id" t-attf-class="text-primary fa #{'fa-chevron-down' if categ.id in parent_category_ids else 'fa-chevron-right'}"/>
                  <a t-att-href="keep('/category/%s' % slaag(categ), category=0)" t-field="categ.name"></a>
                  <ul t-if="categ.child_id" class="nav nav-pills nav-stacked nav-hierarchy" t-att-style="'display:block;' if categ.id in parent_category_ids else 'display:none;'">
                       <t t-foreach="categ.child_id" t-as="categ">
                          <t t-call="website_seo_sale.option_collapse_categories_recursive"/>
                      </t>
                  </ul>
                </li>
            </xpath>
        </template>

        <!--
        <template id="option_collapse_products_categories" name="Collapsible Category List" inherit_id="website_sale.products_categories" active="False" customize_show="True">
          <xpath expr="//div[@id='products_grid_before']/ul" position="replace">
              <ul class="nav nav-pills nav-stacked mt16" id="o_shop_collapse_category">
                  <li t-att-class=" '' if category else 'active' ">
                    <a t-att-href="keep('/zzz',category=0)">All Products</a>
                  </li>
                  <t t-foreach="categories" t-as="categ">
                      <t t-call="website_seo_sale.option_collapse_categories_recursive"/>
                  </t>
              </ul>
          </xpath>
        </template>

        <template id="search" name="Search hidden fields" inherit_id="website_sale.search">
            <xpath expr="//form" position="replace">
                <form t-att-action="keep('/shop'+ slaag(category) if category else '', search=0)" method="get" t-att-class="search_class">
                    <t t-if="attrib_values">
                        <t t-foreach="attrib_values" t-as="a">
                            <input type="hidden" name="attrib" t-att-value="'%s-%s' % (a[0], a[1])"/>
                        </t>
                    </t>
                    <t t-call="website.website_search_box"/>
                </form>
            </xpath>
        </template>

        <template id="products" name="Products" inherit_id="website_sale.products">
            <xpath expr="//div[@class='products_pager']" position="replace">
                <div class="products_pager">
                    <div class="row" style="width: 100%;">
                      <t t-call="website_seo_sale.search"><t t-set="search_class">pagination form-inline col-md-3</t></t>
                      <t t-call="website.pager"/>
                    </div>
                </div>
            </xpath>
        </template>
        -->

        <template id="content_new_product" inherit_id="website_sale.content_new_product" groups="base.group_sale_manager">
            <xpath expr="//a[@id='create-new-product']" position="replace">
                <a id="create-new-product" href="#" data-action="new_product">New Product</a>
            </xpath>
        </template>

        <template id="cart_lines" name="Shopping Cart" inherit_id="website_sale.cart_lines">
            <xpath expr="//a[@t-attf-href='/shop/product/#{ slug(line.product_id.product_tmpl_id) }']" position="replace">
                <a t-attf-href="/#{ slaag(line.product_id.product_tmpl_id) }">
                  <strong t-esc="line.product_id.with_context(display_default_code=False).display_name"/>
                </a>
            </xpath>
        </template>

    </data>
</openerp>